# äº‘åŸç”ŸDevOpså¹³å° - å¿«é€Ÿå¯åŠ¨æŒ‡å— ğŸš€

## ğŸ“‹ é¡¹ç›®ç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„äº‘åŸç”ŸDevOpså¹³å°ï¼ŒåŒ…å«ï¼š
- **CI/CD**: GitLab + Jenkins + Harbor
- **ç›‘æ§**: Prometheus + Grafana
- **æ•°æ®åº“**: PostgreSQL + Redis
- **è‡ªåŠ¨åŒ–**: Ansibleéƒ¨ç½²è„šæœ¬

## ğŸ¯ ä¸¤ç§å¯åŠ¨æ–¹å¼

### æ–¹å¼ä¸€ï¼šDocker Composeï¼ˆæ¨èç”¨äºæ¼”ç¤ºï¼‰

é€‚åˆWindows/Mac/Linuxå¿«é€Ÿæ¼”ç¤ºå’Œå¼€å‘ç¯å¢ƒã€‚

#### å‰ç½®è¦æ±‚
- Docker Desktop å·²å®‰è£…å¹¶è¿è¡Œ
- è‡³å°‘ 8GB å†…å­˜
- è‡³å°‘ 20GB ç£ç›˜ç©ºé—´

#### å¯åŠ¨æ­¥éª¤

**Windowsç”¨æˆ·ï¼š**
```powershell
# è¿è¡Œå¯åŠ¨è„šæœ¬
.\å¯åŠ¨å¹³å°.ps1

# æˆ–è€…ç›´æ¥ä½¿ç”¨docker compose
docker compose up -d
```

**Linux/Macç”¨æˆ·ï¼š**
```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker compose up -d

# ä»…å¯åŠ¨ç›‘æ§æœåŠ¡
docker compose up -d prometheus grafana

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker compose ps

# æŸ¥çœ‹æ—¥å¿—
docker compose logs -f

# åœæ­¢æœåŠ¡
docker compose down
```

#### è®¿é—®åœ°å€

| æœåŠ¡ | åœ°å€ | è´¦å·å¯†ç  |
|------|------|---------|
| GitLab | http://localhost | root / gitlab123456 |
| Jenkins | http://localhost:8080 | é¦–æ¬¡è®¿é—®éœ€é…ç½® |
| Harbor | http://localhost:5000 | admin / Harbor12345 |
| Prometheus | http://localhost:9090 | æ— éœ€è®¤è¯ |
| Grafana | http://localhost:3000 | admin / admin123 |

**æ³¨æ„äº‹é¡¹ï¼š**
- GitLabé¦–æ¬¡å¯åŠ¨éœ€è¦5-10åˆ†é’Ÿ
- ç¡®ä¿ç«¯å£æœªè¢«å ç”¨ï¼š80, 443, 22, 8080, 5000, 9090, 3000, 6379
- å¦‚æœå†…å­˜ä¸è¶³ï¼Œå»ºè®®åªå¯åŠ¨ç›‘æ§æœåŠ¡

---

### æ–¹å¼äºŒï¼šAnsibleéƒ¨ç½²ï¼ˆç”¨äºç”Ÿäº§ç¯å¢ƒï¼‰

é€‚åˆCentOS 9 Streamç”Ÿäº§ç¯å¢ƒå®Œæ•´éƒ¨ç½²ã€‚

#### å‰ç½®è¦æ±‚
- CentOS 9 Stream
- æœ€å°‘ 8GB å†…å­˜ï¼Œæ¨è 16GB
- æœ€å°‘ 50GB ç£ç›˜ç©ºé—´
- Python 3.6+
- Ansible 2.9+

#### éƒ¨ç½²æ­¥éª¤

**1. å®‰è£…Ansible**
```bash
chmod +x install-ansible.sh
./install-ansible.sh
```

**2. é…ç½®inventory**
```bash
# å•èŠ‚ç‚¹éƒ¨ç½²
cp inventory/single-node.yml.example inventory/single-node.yml
vim inventory/single-node.yml  # ä¿®æ”¹IPåœ°å€

# å¤šèŠ‚ç‚¹éƒ¨ç½²
cp inventory/hosts.yml.example inventory/hosts.yml
vim inventory/hosts.yml  # é…ç½®é›†ç¾¤èŠ‚ç‚¹
```

**3. æ‰§è¡Œéƒ¨ç½²**
```bash
# å•èŠ‚ç‚¹å¿«é€Ÿéƒ¨ç½²
ansible-playbook -i inventory/single-node.yml playbooks/single-node-deploy.yml

# æˆ–åˆ†æ­¥éƒ¨ç½²
ansible-playbook -i inventory/single-node.yml playbooks/01-common-setup.yml
ansible-playbook -i inventory/single-node.yml playbooks/02-docker-setup.yml
ansible-playbook -i inventory/single-node.yml playbooks/03-kubernetes-fixed.yml
ansible-playbook -i inventory/single-node.yml playbooks/04-monitoring-setup.yml
ansible-playbook -i inventory/single-node.yml playbooks/05-cicd-setup.yml
```

**4. éªŒè¯éƒ¨ç½²**
```bash
# æ£€æŸ¥Kubernetesé›†ç¾¤
kubectl get nodes
kubectl get pods --all-namespaces

# è¿è¡ŒéªŒè¯è„šæœ¬
./scripts/quick-verify.sh
```

---

## ğŸ”§ å¸¸ç”¨å‘½ä»¤

### Docker Composeç®¡ç†

```bash
# å¯åŠ¨æœåŠ¡
docker compose up -d

# åœæ­¢æœåŠ¡
docker compose down

# é‡å¯æœåŠ¡
docker compose restart

# æŸ¥çœ‹æ—¥å¿—
docker compose logs -f [service_name]

# æŸ¥çœ‹çŠ¶æ€
docker compose ps

# åˆ é™¤æ‰€æœ‰æ•°æ®ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
docker compose down -v
```

### æœåŠ¡ç®¡ç†

```bash
# æŸ¥çœ‹GitLabæ—¥å¿—
docker logs -f gitlab

# æŸ¥çœ‹Jenkinsæ—¥å¿—
docker logs -f jenkins

# è¿›å…¥å®¹å™¨
docker exec -it gitlab bash
docker exec -it jenkins bash

# é‡å¯å•ä¸ªæœåŠ¡
docker compose restart gitlab
```

---

## ğŸ“Š é¡¹ç›®æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   äº‘åŸç”ŸDevOpså¹³å°                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   CI/CDå±‚    â”‚  â”‚   ç›‘æ§å±‚     â”‚  â”‚   æ•°æ®å±‚     â”‚ â”‚
â”‚  â”‚  GitLab      â”‚  â”‚  Prometheus  â”‚  â”‚  PostgreSQL  â”‚ â”‚
â”‚  â”‚  Jenkins     â”‚  â”‚  Grafana     â”‚  â”‚  Redis       â”‚ â”‚
â”‚  â”‚  Harbor      â”‚  â”‚              â”‚  â”‚              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ› æ•…éšœæ’æŸ¥

### GitLab 502é”™è¯¯
```bash
# ç­‰å¾…GitLabå®Œå…¨å¯åŠ¨ï¼ˆ5-10åˆ†é’Ÿï¼‰
docker logs -f gitlab

# æ£€æŸ¥å†…å­˜ä½¿ç”¨
docker stats

# é‡å¯GitLab
docker compose restart gitlab
```

### ç«¯å£å†²çª
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
netstat -ano | findstr :80
netstat -ano | findstr :8080

# ä¿®æ”¹docker-compose.ymlä¸­çš„ç«¯å£æ˜ å°„
```

### å†…å­˜ä¸è¶³
```bash
# åªå¯åŠ¨æ ¸å¿ƒæœåŠ¡
docker compose up -d prometheus grafana postgres redis

# æˆ–å¢åŠ Dockerå†…å­˜é™åˆ¶ï¼ˆDocker Desktopè®¾ç½®ï¼‰
```

---

## ğŸ“š æ›´å¤šæ–‡æ¡£

- [å®Œæ•´README](README.md)
- [é…ç½®è¯´æ˜](docs/CONFIGURATION.md)
- [é¡¹ç›®ç»“æ„](docs/PROJECT_STRUCTURE.md)
- [å•èŠ‚ç‚¹éƒ¨ç½²](docs/single-node-deployment.md)

---

## ğŸ“ é€‚ç”¨åœºæ™¯

- âœ… æ¯•ä¸šè®¾è®¡æ¼”ç¤º
- âœ… æŠ€æœ¯å­¦ä¹ å’Œå®éªŒ
- âœ… é¢è¯•é¡¹ç›®å±•ç¤º
- âœ… DevOpsåŸ¹è®­
- âš ï¸  ç”Ÿäº§ç¯å¢ƒéœ€è¦é¢å¤–å®‰å…¨åŠ å›º

---

**ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼å¦‚æœ‰é—®é¢˜è¯·æŸ¥çœ‹æ–‡æ¡£æˆ–æIssueã€‚** ğŸ‰

