# ❓ 技术栈 - 常见问题快速问答

## 🎯 快速查询

| 问题 | 答案位置 |
|------|---------|
| Ansible是干啥的？ | 第1部分 |
| Kubernetes是干啥的？ | 第2部分 |
| Docker是干啥的？ | 第2部分 |
| Flannel是干啥的？ | 第2部分 |
| GitLab是干啥的？ | 第3部分 |
| Jenkins是干啥的？ | 第3部分 |
| Harbor是干啥的？ | 第3部分 |
| Prometheus是干啥的？ | 第4部分 |
| Grafana是干啥的？ | 第4部分 |
| Alertmanager是干啥的？ | 第4部分 |

---

## 第1部分: 基础设施自动化

### Q1: Ansible是干啥的？

**简短回答**:
```
Ansible是自动化部署工具。
我用它一键部署整个平台，从零到完整的K8s集群、CI/CD系统、监控系统只需30-60分钟。
```

**详细回答**:
```
Ansible是一个自动化部署和配置管理工具。

【我用它做了什么】
1. 自动化系统配置 (SELinux、防火墙等)
2. 自动化软件安装 (Docker、K8s等)
3. 自动化集群初始化
4. 自动化应用部署

【具体实现】
- 编写了11个Playbook
- 支持单节点和多节点部署
- 使用Jinja2模板管理配置文件
- 支持幂等性，可以安全地重复执行

【优势】
- 一键部署，无需人工干预
- 可重复部署，便于版本管理
- 完全自动化，大大提高效率
```

**面试话术**:
```
"我使用Ansible进行自动化部署。
通过编写Playbook，实现了一键部署整个平台。
从零到完整的K8s集群、CI/CD系统、监控系统只需30-60分钟。
这大大提高了部署效率，也便于重复部署和版本管理。"
```

---

## 第2部分: 容器编排

### Q2: Kubernetes是干啥的？

**简短回答**:
```
Kubernetes是容器编排平台。
我用它管理和调度容器，支持自动扩缩容、故障恢复等功能。
```

**详细回答**:
```
Kubernetes是一个容器编排平台。

【我用它做了什么】
1. 部署K8s 1.28集群
2. 管理和调度容器
3. 提供服务发现和负载均衡
4. 实现自动扩缩容
5. 实现故障恢复

【具体功能】
- Deployment: 管理应用副本
- Service: 提供服务发现
- Ingress: 提供外部访问
- ConfigMap/Secret: 管理配置和密钥
- HPA: 自动扩缩容
- PDB: Pod中断预算

【故障恢复】
- Pod异常时自动重启 (1-2分钟)
- 节点故障时Pod自动迁移 (3-5分钟)
- 支持Pod反亲和性避免单点故障
```

**面试话术**:
```
"我部署了K8s 1.28集群，用于容器编排和管理。
集群支持自动调度、资源限制、自动扩缩容等功能。
配置了多层故障恢复机制，确保高可用性。
Pod异常时自动重启，节点故障时自动迁移。"
```

### Q3: Docker是干啥的？

**简短回答**:
```
Docker是容器运行时。
我用它打包应用，支持多阶段构建优化镜像大小。
```

**详细回答**:
```
Docker是一个容器运行时。

【我用它做了什么】
1. 编写Dockerfile打包应用
2. 支持多阶段构建优化镜像
3. 在K8s中运行容器
4. 支持容器资源限制和健康检查

【具体实现】
- 部署Docker 24.0+
- 支持Containerd作为备选运行时
- 配置镜像加速和缓存
- 支持镜像分层缓存加快构建速度
```

**面试话术**:
```
"我使用Docker作为容器运行时。
编写了Dockerfile打包应用，支持多阶段构建优化镜像。
在K8s中运行容器，支持资源限制和健康检查。"
```

### Q4: Flannel是干啥的？

**简短回答**:
```
Flannel是网络插件。
我用它实现Pod间的跨节点通信，支持Service服务发现。
```

**详细回答**:
```
Flannel是一个网络插件 (CNI)。

【我用它做了什么】
1. 为Pod分配IP地址
2. 实现Pod间跨节点通信
3. 支持Service网络
4. 支持DNS服务发现

【网络设计】
- 集群网络: 192.168.76.0/24 (节点通信)
- Service网络: 10.96.0.0/12 (服务发现)
- Pod网络: 10.244.0.0/16 (容器通信)

【具体实现】
- 部署Flannel CNI插件
- 配置VXLAN网络模式
- 支持跨节点Pod通信
- 支持Service负载均衡
```

**面试话术**:
```
"我使用Flannel作为CNI网络插件。
实现了Pod间的跨节点通信，支持Service服务发现。
配置了三层网络隔离，便于管理和故障排查。"
```

---

## 第3部分: CI/CD流水线

### Q5: GitLab是干啥的？

**简短回答**:
```
GitLab是代码仓库。
我用它存储代码，配置Webhook自动触发Jenkins Pipeline。
```

**详细回答**:
```
GitLab是一个代码仓库。

【我用它做了什么】
1. 存储项目代码
2. 支持Git版本控制
3. 支持分支管理
4. 配置Webhook自动触发Pipeline

【具体实现】
- 部署GitLab 16.0+
- 配置了Webhook
- 支持SSH和HTTPS访问
- 支持用户和权限管理
```

**面试话术**:
```
"我使用GitLab作为代码仓库。
配置了Webhook，当开发者提交代码时自动触发Jenkins Pipeline。
支持分支管理和代码审查，确保代码质量。"
```

### Q6: Jenkins是干啥的？

**简短回答**:
```
Jenkins是CI/CD流水线。
我用它实现8阶段自动化流程，从代码提交到生产部署只需5-10分钟。
```

**详细回答**:
```
Jenkins是一个CI/CD流水线工具。

【8阶段流程】
1. 代码检出 - 从GitLab拉取代码
2. 代码构建 - 编译和打包应用
3. 单元测试 - 运行测试确保质量
4. 代码扫描 - 检查代码质量
5. 构建镜像 - 使用Dockerfile构建镜像
6. 推送镜像 - 推送到Harbor镜像仓库
7. 更新K8s - 更新Deployment镜像版本
8. 验证部署 - 检查Pod是否正常运行

【关键特性】
- 自动触发: GitLab提交代码自动触发
- 自动回滚: 部署失败自动回滚到上一个版本
- 完整日志: 保留所有构建日志便于排查
- 错误处理: 任何阶段失败立即停止并告警

【部署时间】
- 从代码提交到生产部署: 5-10分钟
- 完全自动化，无需人工干预
```

**面试话术**:
```
"我使用Jenkins实现完整的CI/CD流水线。
从代码提交到生产部署只需5-10分钟，完全自动化。

【8阶段流程】
1. 代码检出 - 从GitLab拉取代码
2. 代码构建 - 编译和打包应用
3. 单元测试 - 运行测试确保质量
4. 代码扫描 - 检查代码质量
5. 构建镜像 - 使用Dockerfile构建镜像
6. 推送镜像 - 推送到Harbor镜像仓库
7. 更新K8s - 更新Deployment镜像版本
8. 验证部署 - 检查Pod是否正常运行

【关键特性】
- 自动触发: GitLab提交代码自动触发
- 自动回滚: 部署失败自动回滚到上一个版本
- 完整日志: 保留所有构建日志便于排查
- 错误处理: 任何阶段失败立即停止并告警
"
```

### Q7: Harbor是干啥的？

**简短回答**:
```
Harbor是镜像仓库。
我用它存储和管理Docker镜像，支持版本管理和访问控制。
```

**详细回答**:
```
Harbor是一个镜像仓库。

【我用它做了什么】
1. 存储Docker镜像
2. 支持镜像版本管理
3. 支持镜像标签管理
4. 支持镜像搜索

【安全功能】
- 用户认证和授权
- 镜像扫描 (检查漏洞)
- 镜像签名验证
- 访问控制

【具体实现】
- 部署Harbor 2.x
- 配置镜像存储
- 配置用户认证
- 支持镜像复制
- 支持垃圾回收

【我遇到的问题】
在部署Harbor时遇到了日志驱动问题。
容器无法正常启动，通过查看日志发现是启动顺序问题。
我查阅了GitHub issues和官方文档，最终定位到问题原因。
这个经验让我学到了如何通过日志分析问题。
```

**面试话术**:
```
"我使用Harbor作为镜像仓库。
存储和管理Docker镜像，支持版本管理和访问控制。

【我遇到的问题】
在部署Harbor时遇到了日志驱动问题。
容器无法正常启动，通过查看日志发现是启动顺序问题。
我查阅了GitHub issues和官方文档，最终定位到问题原因。
这个经验让我学到了如何通过日志分析问题。
"
```

---

## 第4部分: 监控告警

### Q8: Prometheus是干啥的？

**简短回答**:
```
Prometheus是监控系统。
我用它采集系统、K8s、容器、应用等多维度指标。
```

**详细回答**:
```
Prometheus是一个监控系统。

【采集的指标】
- 系统级: CPU、内存、磁盘、网络I/O
- K8s级: Pod状态、Deployment副本数、节点状态
- 容器级: 容器CPU、内存、网络使用
- 应用级: HTTP请求数、延迟、错误率

【具体实现】
- 部署Prometheus 2.x
- 配置scrape_configs采集指标
- 配置alert_rules定义告警规则
- 配置Alertmanager处理告警
- 支持自定义指标采集

【数据保留】
- 保留15天的高精度数据
- 用于实时监控和告警
- 生产环境可以集成Thanos实现长期存储
```

**面试话术**:
```
"我使用Prometheus采集监控指标。
采集了系统、K8s、容器、应用等多维度指标。

【采集的指标】
- 系统级: CPU、内存、磁盘、网络I/O
- K8s级: Pod状态、Deployment副本数、节点状态
- 容器级: 容器CPU、内存、网络使用
- 应用级: HTTP请求数、延迟、错误率

【数据保留】
- 保留15天的高精度数据
- 用于实时监控和告警
- 生产环境可以集成Thanos实现长期存储
"
```

### Q9: Grafana是干啥的？

**简短回答**:
```
Grafana是可视化平台。
我用它展示监控数据，创建了多个监控仪表板。
```

**详细回答**:
```
Grafana是一个可视化平台。

【我用它做了什么】
1. 创建监控仪表板
2. 展示系统监控数据
3. 展示K8s监控数据
4. 展示应用监控数据

【图表类型】
- 时间序列图表
- 热力图
- 柱状图
- 仪表盘

【具体实现】
- 部署Grafana 9.x+
- 配置Prometheus数据源
- 创建监控仪表板
- 配置告警规则
- 支持用户管理
```

**面试话术**:
```
"我使用Grafana展示监控数据。
创建了多个监控仪表板，实时展示系统、K8s、应用的监控数据。
通过可视化图表，便于快速发现问题。"
```

### Q10: Alertmanager是干啥的？

**简短回答**:
```
Alertmanager是告警管理系统。
我用它处理和发送告警，配置了分级告警机制避免告警风暴。
```

**详细回答**:
```
Alertmanager是一个告警管理系统。

【告警分级】
- Critical告警: 立即通知 (5分钟重复)
- Warning告警: 定期通知 (30分钟重复)
- Info告警: 仅记录日志

【关键特性】
- 告警聚合: 避免告警风暴
- 告警抑制: 避免级联告警
- 多通知方式: 邮件、Webhook、PagerDuty等

【告警规则】
- CPU > 80% 告警
- 内存 > 85% 告警
- 磁盘 > 90% 告警
- Pod频繁重启告警
- 节点不可用告警

【具体实现】
- 部署Alertmanager 0.x
- 配置告警规则
- 配置告警路由
- 配置通知接收器
- 支持告警抑制规则
```

**面试话术**:
```
"我使用Alertmanager处理和发送告警。
配置了分级告警机制:
- Critical告警立即通知
- Warning告警定期通知
- Info告警仅记录

【关键特性】
- 告警聚合: 避免告警风暴
- 告警抑制: 避免级联告警
- 多通知方式: 邮件、Webhook、PagerDuty等

【告警规则】
- CPU > 80% 告警
- 内存 > 85% 告警
- 磁盘 > 90% 告警
- Pod频繁重启告警
- 节点不可用告警
"
```

---

## 🎯 完整技术栈总结

```
【第1层: 基础设施自动化】
Ansible → 一键部署整个平台 (30-60分钟)

【第2层: 容器编排】
Kubernetes → 管理和调度容器
Docker → 打包和运行应用
Flannel → Pod间网络通信

【第3层: CI/CD流水线】
GitLab → 代码仓库
Jenkins → 自动化构建和部署 (5-10分钟)
Harbor → 镜像仓库

【第4层: 监控告警】
Prometheus → 采集监控指标
Grafana → 展示监控数据
Alertmanager → 处理和发送告警
```

---

## 💡 面试时的完整回答

```
"我的项目使用了完整的云原生技术栈。

【自动化部署】
使用Ansible自动化部署，一键部署整个平台。
从零到完整的K8s集群、CI/CD系统、监控系统只需30-60分钟。

【容器编排】
使用Kubernetes 1.28进行容器编排。
使用Docker作为容器运行时。
使用Flannel作为网络插件，实现Pod间通信。

【CI/CD流水线】
使用GitLab存储代码。
使用Jenkins实现8阶段自动化流水线。
从代码提交到生产部署只需5-10分钟。
使用Harbor存储和管理镜像。

【监控告警】
使用Prometheus采集多维度指标。
使用Grafana展示监控数据。
使用Alertmanager处理和发送告警。
配置了分级告警机制，避免告警风暴。

【关键成就】
- 完全自动化部署
- 完整的CI/CD流程
- 高可用设计
- 完整的监控体系
"
```

---

**记住**: 每个技术都有具体的作用和完成的功能，面试时要清楚地说明！

